\documentclass{beamer}
\usepackage[utf8]{inputenc}
\inputencoding{latin1}
\usepackage[T1]{fontenc}
\usepackage[spanish,english]{babel}
\usepackage{graphics}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{ragged2e}
\usetheme[secheader=true]{Madrid}
\useinnertheme{rectangles}
\usepackage{tikz}
\beamertemplatenavigationsymbolsempty 
\title{FPGA}
\author{Miguel A Sagreras}
\date[2015]{}
%\institution[short name]{long name}
\begin{document}

\begin{frame}
\titlepage
\end{frame}

\begin{frame}
\tableofcontents
\end{frame}

\section{Lógica binaria}
\begin{frame}[t]
\frametitle{Números}
{\scriptsize \begin{center}
	\begin{tabular}[t]{r|r|r}
			Decimal           & Hexadecimal          & \visible<5-> {Binario} \\
		\hline
			               0  &                  0   & \visible<5-> {0} \\
                           1  &                  1   & \visible<5-> {\textcolor{red}{1}} \\
                           2  &                  2   & \visible<6-> {\textcolor{blue}{10}} \\
			               3  &                  3   & \visible<7-> {11} \\
			               4  &                  4   & \visible<8-> {100} \\
			               5  &                  5   & \visible<9-> {101} \\
			               6  &                  6   & \visible<10-> {110} \\
			               7  &                  7   & \visible<10-> {111} \\
			               8  &                  8   & \visible<10-> {1000} \\
           \textcolor{red}{9} &                  9  & \visible<10-> {1001} \\
	\visible<2-> {\textcolor{blue}{10}} &    \visible<2-> {A}  & \visible<10-> {1010} \\
			\visible<3-> {11} &    \visible<3-> {B}  & \visible<10-> {1011} \\
			\visible<3-> {12} &    \visible<3-> {C}  & \visible<10-> {1100} \\
			\visible<3-> {13} &    \visible<3-> {D}  & \visible<10-> {1101} \\
			\visible<3-> {14} &    \visible<3-> {E}  & \visible<10-> {1110} \\
			\visible<3-> {15} &    \visible<3-> {\textcolor{red}{F}}  & \visible<10-> {1111} \\
			\visible<4-> {16} &    \visible<4-> {\textcolor{blue}{10}} & \visible<10-> {10000} \\
	\end{tabular}\end{center}}
\end{frame}

\begin{frame}
\frametitle{Valores lógicos}
\begin{center}
	\includegraphics[width=0.9\textwidth]{logic_values.eps}
\end{center}
\end{frame}

\begin{frame}
\frametitle{Compuertas}
\begin{center}
	\includegraphics[width=\textwidth]{logic_gates.eps}
\end{center}
\end{frame}

\begin{frame}
\frametitle{Aritmética}
\begin{center}
	\includegraphics[width=\textwidth]{adder1.eps}
\end{center}
\end{frame}

\begin{frame}
\frametitle{Sumador}
\begin{center}
	\includegraphics[height=.8\textheight]{adder2.eps}
\end{center}
\end{frame}

\begin{frame}
\frametitle{Diseño}
	\begin{block}{Dificultades}
		\begin{itemize}
			\item Tiempos de propagación
				\begin{itemize}
				\item Compuertas
				\item Cables
				\end{itemize}
			\item Número de componentes
		\end{itemize}
	\end{block}
	\begin{block}{Soluciónes parciales}
			\begin{itemize}
			\item Ripple Carry Adder
			\item Carry Look Ahead Adder
			\item Carry Save Adder
			\item Carry Select Adder
			\end{itemize}
	\end{block}
\end{frame}

%\section{ENIAC Electronic Numerical Integrator And Computer}
%\begin{frame}
%	\tableofcontents[currentsection]
%\end{frame}
%
%\begin{frame}
%%	ENIAC was built at the University of Pennsylvania between 1943 and 1945 by
%%	two professors, John Mauchly and the 24 year old J. Presper Eckert, who got
%%	funding from the war department after promising they could build a machine
%%	that would replace all the "computers", meaning the women who were employed
%%	calculating the firing tables for the army's artillery guns. 
%
%	\begin{block}{}
%	\justify
%	ENIAC se construyó en la Universidad de Pennsylvania entre 1943 y 1945 por
%	dos profesores, John Mauchly y J. Presper Eckert de 24 años quienes
%	obtuvieron fondos del departamento de guerra después de prometer que podían
%	construir una máquina que reemplazaría a todas las "computadoras",
%	refiriendose a todas las mujeres empleadas en calcular las tablas de
%	disparo de las armas de artilleria
%	\end{block}
%	\vfill
%	An Illustrated History of Computers \\
%	John Kopplin 2002
%\end{frame}
%
%\begin{frame}
%\frametitle{Descripción}
%\begin{itemize}
%	\item 1943 Físico J. Mauchly e Ingeniero J. P. Eckert
%	\item Cálculo de tablas de disparo de artilleria
%	\item Programación por interruptores y clavijas
%	\item 17.000 tubos de vacio
%	\item Aproximadamente 4.100 bits
%	\item 150 KW
%	\item 167 $m^{2}$
%	\item 500.000 USD o 6.000.000 USD actualizados
%\end{itemize}
%\end{frame}
%
%\begin{frame}
%%	The day that Mauchly and Eckert saw the first small piece of ENIAC work,
%%	the persons they ran to bring to their lab to show off their progress were
%%	some of these female computers (one of whom remarked, "I was astounded that
%%	it took all this equipment to multiply 5 by 1000").
%	\begin{block}{}
%	\justify
%	El día que Mauchly y Eckert lograron que la primera pieza pequeña de la
%	ENIAC funcionase, fueron corriendo a traer a algunas de las computadoras
%	mujeres al laboratorio para mostrarle su progreso, una de las cuales
%	remarcó "quedé atónita al ver que llevó todo ese equipo para multiplicar 5
%	por 1000".
%	\end{block}
%	\vfill
%	An Illustrated History of Computers \\
%	John Kopplin 2002
%\end{frame}
%
%\begin{frame}
%\frametitle{ENIAC o Electronic Numerical Integrator And Computer}
%\begin{center}
%	\includegraphics[height=0.8\textheight]{Eniac.jpg}
%\end{center}
%\end{frame}
%
%\section{Ley de Moore}
%\begin{frame}
%	\tableofcontents[currentsection]
%\end{frame}
%
%\begin{frame}
%\frametitle{Ley de Moore}
%	\begin{itemize}
%		\item 1975
%		\item Gordon E. Moore Co-fundador de Intel
%		\item Duplicación de la escala de integración cada dos años.
%	\end{itemize}
%	\begin{center}
%		\includegraphics[width=7cm]{mooreslaw.eps} 
%	\end{center}
%\end{frame}
%
\section{Field Programmable Gate Arrays}
\begin{frame}
	\tableofcontents[currentsection]
\end{frame}

\begin{frame}
\frametitle{Gate Arrays o Arreglos de Compuertas}
	\begin{columns}[t]
	\column{0.6\textwidth}
		\begin{itemize}
		\item C.I. con bloques prearmandos para propósito específico
		\item Ventajas
			\begin{itemize}
			\item Fabricación de gran escala
			\item Solo requieren las máscaras de interconexión 
			\item Reduce el costo de la aplicación específica
			\end{itemize}
		\end{itemize}
	\column{0.4\textwidth}
		\begin{center}
			\includegraphics[width=\textwidth]{S-MOS_Systems_ASIC_SLA6140.jpg} 
		\end{center}
	\end{columns}
%"S-MOS Systems ASIC SLA6140" by Antoinebercovici - Own work. Licensed under CC BY-SA 3.0 via Commons - https://commons.wikimedia.org/wiki/File:S-MOS_Systems_ASIC_SLA6140.jpg#/media/File:S-MOS_Systems_ASIC_SLA6140.jpg
\end{frame}

\begin{frame}
\frametitle{FPGAs Field Programmable Gate Arrays}
	\begin{itemize}
		\item 1985 Xilinx
		\item Gate Arrays cuya red interconexión es programable.
		\item Son los impulsores del incremento en la escala de integración
		\item Tecnología de exportación restringida
	\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Ventajas}
	\begin{block}{FPGA vs procesadores}
		\begin{itemize}
			\item Más rápidas
			\item Menor consumo a igual aplicación
			\item Se adaptan a aplicaciones específicas
		\end{itemize}
	\end{block}
	\begin{block}{FPGA vs ASIC}
		\begin{itemize}
			\item Menor costo de fabricación para bajo volunem
			\item Reprogramables para actualizaciones de la aplicación
		\end{itemize}
	\end{block}
\end{frame}

\begin{frame}
\frametitle{Aplicaciones}
	\begin{columns}
		\column{0.45\textwidth}
		\begin{itemize}
			\item Aeroespacio y Defensa
			\item Electromedicina.
			\item Protipado de ASIC.
			\item Audio
			\item Automotor
			\item Radio difusion
			\item Electrónica de Consumo
			\item Data Center
		\end{itemize}
		\column{0.55\textwidth}
		\begin{itemize}
			\item Video \& Procesamiento de Imagen
			\item Computación de Alta Prestación
			\item Industrial
			\item Medicina
			\item Instrumentación Cientifica
			\item Seguridad
			\item Comunicaciones alámbricas
			\item Comunicaciones inalabámbricas
		\end{itemize}
	\end{columns}
\end{frame}

\begin{frame}[t]
\frametitle{Diagrama en bloques}
	\begin{center}
		\includegraphics[width=0.75\textwidth]{fpga.eps}
	\end{center}
\end{frame}

\begin{frame}[t]
\frametitle{Elemento Lógico}
	\begin{center}
		\includegraphics[width=0.75\textwidth]{fpgalut.eps}
	\end{center}
\end{frame}

\begin{frame}
\frametitle{Nu Horizons Spartan 3A DSP board}
	\begin{center}
		\includegraphics[width=11cm]{nuhorizonsS3DSP.jpg}
	\end{center}
\end{frame}

\begin{frame}
\frametitle{Descripción}
\framesubtitle{Nu Horizons Spartan 3A DSP board}
	\begin{itemize}
		\item 2008
		\item Spartan 3A DSP
			\begin{itemize}
				\item 37440 LE equivalente a 14 procesadores de 32 Bits.
				\item 84 BRAM de 18Kbits
				\item 84 Unidades de DSP
				\item 250 Mhz
				\item Tecnología de exportación restringida
			\end{itemize}
		\item 32 MBytes de Memoria DDR1 333 MT/s
		\item 2 ADC
			\begin{itemize}
				\item Diferencial
				\item 14 bits
				\item 120 MS/s
				\item 500 Mhz
			\end{itemize}
		\item Video DAC salida diferencial
		\item Ethernet
		\item Precio 200 USD
	\end{itemize}
\end{frame}

\begin{frame}[t]
\frametitle{Algoritmo en Lenguaje C y en Assembler Optimizado}
\framesubtitle{Ejemplo de aplicación : Convolución}
	\begin{center}
		$y[n] = \sum\limits_{i=0}^{N=84-1}\ h[i]*x[n-i]$
	\end{center}
	\begin{columns}[t]
		\column{0.4\textwidth}
		\lstinputlisting[language=C,
			tabsize=4,
			basicstyle=\ttfamily\tiny,
			keywordstyle=\color{blue}\ttfamily,
			stringstyle=\color{red}\ttfamily,
			commentstyle=\color{brown}\ttfamily]{convolution.c}
		\column{0.6\textwidth}
		\lstinputlisting[language=C,
			tabsize=4,
			basicstyle=\ttfamily\tiny,
			keywordstyle=\color{blue}\ttfamily,
			stringstyle=\color{red}\ttfamily,
			commentstyle=\color{brown}\ttfamily]{convolution.s}
	\end{columns}
\end{frame}

\begin{frame}
\frametitle{Diagrama en bloque para FPGA}
\framesubtitle{Ejemplo de aplicación : Convolución}
	\begin{center}
		$y[n] = \sum\limits_{i=0}^{N=84-1}\ h[i]*x[n-i]$
	\end{center}
	\begin{center}
		\includegraphics[width=11cm]{convolutionfpga.eps}
	\end{center}
\end{frame}

\begin{frame}[t]
\frametitle{Comparación estimaiva entre FPGA y Procesador}
\framesubtitle{Ejemplo de aplicación : Convolución}
	\begin{columns}[t]
	\column{0.35\textwidth}
	\begin{block}{\small Spartan 3A DSP}
		{\scriptsize \begin{itemize}
			\item Tecnología 2004
			\item 90 nm
			\item 250 Mhz o ciclo de 4 ns
			\item Un resultado por ciclo
			\item Un resultado cada 4 ns
		\end{itemize}}
	\end{block}
	\column{0.6\textwidth}
	\begin{block}{\small Intel i7 920}
		{\scriptsize \begin{itemize}
			\item Tecnología 2008
			\item 45 nm
			\item 2.66 Ghz  o ciclo de 0.375 ps
			\item Un resultado cada 84 ciclos del lazo
			\item Un lazo 7 instrucciones
			\item 0.44\footnote{\tiny Computer Achitecture A Quantitative Approach 5th edition \\ Hennessy Patterson figura 3.43} ciclos por instrucción.
			\item Un resultado cada 84*7*0.44*0.375 = 97 ns
		\end{itemize}}
	\end{block}
	\end{columns}
	\begin{block}{\small Aumento de velocidad}
	\begin{center}
		$\frac{Spartan3A\ DSP}{Corei7} = \frac{97 ns}{4 ns} = 24$
	\end{center}
	\end{block}
\end{frame}

\begin{frame}
\frametitle{Memoria externa}
	\begin{itemize}
		\item La FPGA tiene memoria interna pero no es masiva
		\item Se requiere de un controlador de memoria DRAM
		\item El controlador deber sostener la velocidad de transferencia de datos entre la aplicación y la memoria DRAM
	\end{itemize}
\end{frame}

\section{DDR DRAM}
\begin{frame}
	\tableofcontents[currentsection]
\end{frame}

%\begin{frame}[t]
%\frametitle{DRAM Memoria dinámica}
%	\begin{itemize}
%		\item 1966
%		\item Robert Dennard
%		\item Un transistor por bit
%	\end{itemize}
%	\begin{center}
%		\includegraphics[width=6.5cm]{onetransistor.png} 
%	\end{center}
%\end{frame}

\begin{frame}
\frametitle{Banco de Memoria de un solo transistor}
	\begin{center}
	\includegraphics[height=.8\textheight]{membank.eps}
	\end{center}
\end{frame}

%\begin{frame}
%\frametitle{Multiplexado de la dirección}
%	\begin{itemize}
%		\item 1966-
%		\item Robert Proebsting cofundador de Mostek
%		\item Divide la direccion en dos y multiplexa las partes
%			\begin{itemize}
%				\item Filas \textbf{Row}
%				\item Columnas \textbf{Column}
%			\end{itemize}
%		\item Reduce el tamaño del Chip y por consiguiente su costo.
%	\end{itemize}
%	\begin{center}
%		\includegraphics[width=0.55\textwidth]{MT4C1024-HD.jpg} \\
%		\tiny{Micron MT4C1024 Chip. 1 Mbit DRAM. Die size 8662x3969$\mu m$ 1989 - 1991}
%	\end{center}
%\end{frame}

\begin{frame}
\frametitle{Diagrama en Bloques}
\framesubtitle{MOSTEK DRAM}
	\includegraphics[width=0.9\textwidth]{dramchip.eps}
\end{frame}

%\begin{frame}[t]
%\frametitle{Versiones más reconocidas}
%\framesubtitle{DRAM}
%	\begin{block}{DRAM Asincrónica}
%		\begin{itemize}
%			\item FPM Fast Page Mode
%			\item EDO Extended Data Out - 1995
%		\end{itemize}
%	\end{block}
%	\begin{block}{SDRAM DRAM Sincrónica}
%		\begin{itemize}
%		\item SDR Single Data Rate - 1993 
%		\item DDR Double Data Rate - 2000
%			\begin{itemize}
%			\item DDR1 - 2000
%			\item DDR2 - 2003
%			\item DDR3 - 2007
%			\item DDR4 - 2014
%			\end{itemize}
%		\end{itemize}
%	\end{block}
%\end{frame}
%
%\begin{frame}
%\frametitle{Secuencia de acceso}
%\framesubtitle{DRAM}
%	\begin{itemize}
%		\item Acceder a la fila con las lineas precargardas
%		\item Conectar el amplificador de sensado y obtener el valor almacenado
%		\item Acceder a la columna
%		\item Recuperar el valor leido
%		\item Percargar las lineas a la mitad de la tension entre el 0 y el 1 lógico
%	\end{itemize}
%\end{frame}

%\begin{frame}
%\frametitle{Diagrama de tiempos FPM  y EDO}
%	\begin{center}
%		\includegraphics[width=\textwidth]{dram-timings.eps}
%	\end{center}
%\end{frame}
%
%\begin{frame}
%\frametitle{Diagrama de tiempos SDR DRAM}
%	\begin{center}
%		\includegraphics[width=\textwidth]{sdrdram-timings.eps}
%	\end{center}
%\end{frame}
%
\begin{frame}
\frametitle{Diagrama de tiempos simplificado de DDR DRAM}
	\begin{center}
		\includegraphics[width=\textwidth]{ddrdram-timings.eps}
	\end{center}
\end{frame}

\begin{frame}
\frametitle{Diagrama en bloque de un chip de DDR3 DRAM}
	\begin{center}
		\includegraphics[width=\textwidth]{ddr3-blockdiagraman.eps}
	\end{center}
\end{frame}

\section{Controlador DDR DRAM}
\begin{frame}
	\tableofcontents[currentsection]
\end{frame}

\begin{frame}
\frametitle{\footnotesize Arquitectura del controlador de DDR DRAM obtenido para FPGA}
	\begin{center}
		\includegraphics[width=.95\textwidth]{ddrcntroler.eps}
	\end{center}
\end{frame}

\begin{frame}[t]
\frametitle{Program Unit}
	\begin{columns}[t]
	\column{0.4\textwidth}
		\\
		Secuencia los comandos:
				\begin{itemize}
					\item ACT
					\item READ
					\item WRITE
					\item PRE
					\item REF
				\end{itemize}
	\column{0.6\textwidth}
		\begin{center}
			\includegraphics[width=.75\textwidth]{ddr3-statedbusy.eps}
		\end{center}
	\end{columns}
\end{frame}

\begin{frame}
\frametitle{Processor Unit}
	\begin{itemize}
		\item Temporiza y ejecuta, deacuerdo a las especificaciones los comandos:
			\begin{itemize}
				\item ACT
				\item READ
				\item WRITE
				\item PRE
				\item REF
			\end{itemize}
		\item Tiempos de propagación críticos 
	\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Diagrama de tiempos especificados por la memoria}
\framesubtitle{Comando READ}
\centering
	\includegraphics[width=.8\textwidth]{ddr3nrdbrst.eps} 
\end{frame}



\begin{frame}[t]
\frametitle{Config \& Refresh Unit}
	\begin{itemize}
	\item Ejecuta las intrucciones de inicialización
	\item Temporización de las instrucciones MPR, MRS
	\item Configuración de BL, CL, AL, WL
	\item Ciclo de refresco
	\end{itemize}
	\begin{center}
		\includegraphics[width=0.6\textwidth]{ddr3initstated.eps}
	\end{center}
\end{frame}


\begin{frame}
\frametitle{Scheduler Unit}
	\begin{itemize}
		\item Tiempos de propagación críticos
		\item Temporización de las señales de acceso a
			\begin{itemize}
				\item DRAM
				\item IOFIFOs
			\end{itemize}
		\item Compuesta por 
		\begin{itemize}
			\item Phase Unit
			\item Task Unit
		\end{itemize}
	\end{itemize}
\end{frame}

\begin{frame}[t]
\frametitle{Conclusiones}
\footnotesize
\begin{center}
\begin{tabular}[t]{|l|c|c|c|}
	\hline
	Familia & Spartan 3A DPS & Virtex 5 & LatticeECP3 \\
	\hline
	Fabricante            & Xilinx & Xilinx & Lattice \\
	Escala de integración & 90 nm  & 65 nm  & 65 nm \\
	Grado                 & 4      &   1    & 8 \\
	Tipo de DRAM          & DDR1   & DDR2   & DDR3 \\
	\hline
	Modulo del Fabricante \\
	\hline
	Velocidad   T/s          & 266 & 533 & 800 \\
	Código portable       & no  & no  & cerrado \\
	\hline
	Modulos obtenido  \\
	\hline
	Velocidad T/s    & 333 & 650 & 1000 \\
	Código portable       & sí   & sí & sí \\
	\hline
	Aumento de velocidad  & 25\% & 22\% & 25\% \\
	\hline

	\end{tabular}
\end{center}
\end{frame}

\begin{frame}
\frametitle{Resultado de la síntesis}
\framesubtitle{Lattice ECP3 Versa Kit}
	\begin{center}
		\includegraphics[width=0.5\textwidth]{ddr3ctrl.png}
	\end{center}
\end{frame}

\end{document}

