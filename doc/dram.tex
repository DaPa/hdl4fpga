\documentclass{beamer}
\usepackage[utf8]{inputenc}
\inputencoding{latin1}
\usepackage[T1]{fontenc}
\usepackage[spanish,english]{babel}
\usepackage{graphics}
\usepackage{graphicx}
\usepackage{listings}
\usetheme[secheader=true]{Madrid}
\useinnertheme{rectangles}
\usepackage{tikz}
\beamertemplatenavigationsymbolsempty 
\title{FPGA Más Rápido y Más furioso}
\author{Miguel A Sagreras}
\date[2015]{}
%\institution[short name]{long name}
\begin{document}

\begin{frame}
\titlepage
\end{frame}

\section{Primeras computadoras}
\subsection{Tecnología analógica}
\begin{frame}[t]
\frametitle{Torpedo Data Computer}
\begin{columns}[t]
	\column{.6\textwidth}
		\begin{itemize}
			\item 1940
			\item Instaladas en submarinos
			\item Cálculo del ajuste de los parámetros \\ del torpedo previo al disparo
		\end{itemize}
	\column{.4\textwidth}
	\begin{center}
	\includegraphics[width=\textwidth]{tdc.jpg} 
	\end{center}
\end{columns}
\end{frame}

\subsection{Tecnología digital electromecánica}

\begin{frame}
\frametitle{Relay}
	\begin{columns}
	\column{.5\textwidth}
	\begin{center}
		\includegraphics[height=3cm]{relay-imagen.jpg}
	\end{center}
	\column{.5\textwidth}
	\begin{center}
		\includegraphics[height=3cm]{relay-diagrama.png}
	\end{center}
\end{columns}
\end{frame}

\begin{frame}
\frametitle{Z3}
\begin{minipage}[c]{5.25cm}
	\begin{itemize}
		\item 1941
		\item Konrad Zuse
		\item Estudio de aeroelasticidad
		\item 64 palabras de 22 bits
		\item 5 Hz
		\item 2000 relays
		\item 4 KW
		\item 1 Tonelada
	\end{itemize}
\end{minipage}
	\begin{minipage}[c]{6.4cm}
		\includegraphics[width=6.4cm]{Z3_Deutsches_Museum.JPG}
	\end{minipage}
\end{frame}

\subsection{Tecnolgía digital electrónica}
\begin{frame}
\frametitle{Tubos de vacio}
	\begin{center}
	\includegraphics[width=.9\textwidth]{ENIAC-Computer-045_book_fin.jpg}
	\end{center}
\end{frame}

\begin{frame}
\frametitle{ENIAC Electronic Numerical Integrator And Computer}
\framesubtitle{Descripción}
\begin{itemize}
	\item 1943
	\item Cálculo de tablas de disparo de artilleria
	\item Programación por interruptores y clavijas
	\item $10^{3}$ más rápida en procesamiento que las electromecánicas
	\item 100 palabras de 10 digitos decimales más signo o 4100 bits
	\item 17.000 tubos de vacio
	\item 7.200 diodos de cristal
	\item 5.000.000 de soldaduras
	\item 150 KW
	\item 167 $m^{2}$
	\item 500.000 USD o 6.000.000 USD actualizados
\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Memoria Drum}
	\begin{minipage}[b]{7.5cm}
		\begin{itemize}
			\item 1932
			\item Gustav Tauschek
			\item Capacidad de 500 Kbits o 62.5 Kbytes
			\item Precursores de los HDD o discos rigidos
		\end{itemize}
	\end{minipage}
	\begin{minipage}[c]{4cm}
		\begin{center}
			\includegraphics[height=4cm]{Pamiec_bebnowa_1.jpg}
		\end{center}
	\end{minipage}
\end{frame}

\begin{frame}
\frametitle{ENIAC o Electronic Numerical Integrator And Computer}
\begin{center}
	\includegraphics[height=0.8\textheight]{Eniac.jpg}
\end{center}
\end{frame}

\begin{frame}[t]
\frametitle{Sistemas númericos}
{\tiny
\begin{columns}[t]
	\column{0.1\textwidth}
	\begin{flushright}
	\visible<10-> 0 \\
	\visible<1-> 1 \\
	\visible<2-> 2 \\
	\visible<3-> 3 \\
	\visible<4-> 4 \\
	\visible<5-> 5 \\
	\visible<6-> 6 \\
	\visible<7-> 7 \\
	\visible<8-> 8 \\
	\visible<9-> 9 \\
	\visible<10-> {A} \\
	\visible<11-> {B} \\
	\visible<12-> {C} \\
	\visible<13-> {D} \\
	\visible<14-> {E} \\
	\visible<15-> {F} \\
	\visible<16-> {10}
	\end{flushright}
	\column{0.1\textwidth}
	\begin{flushright}
	\visible<10-> 0 \\
	\visible<10-> 1 \\
	\visible<10-> 2 \\
	\visible<10-> 3 \\
	\visible<10-> 4 \\
	\visible<10-> 5 \\
	\visible<10-> 6 \\
	\visible<10-> 7 \\
	\visible<10-> 8 \\
	\visible<10-> 9 \\
	\visible<10-> {10} \\
	\visible<11-> {11} \\
	\visible<12-> {12} \\
	\visible<13-> {13} \\
	\visible<14-> {14} \\
	\visible<15-> {15} \\
	\visible<16-> {16}
	\end{flushright}
	\column{0.1\textwidth}
	\begin{flushright}
	\visible<16-> {0} \\
	\visible<16-> {1} \\
	\visible<17-> {10} \\
	\visible<18-> {11} \\
	\visible<19-> {100} \\
	\visible<20-> {101} \\
	\visible<21-> {110} \\
	\visible<22-> {111} \\
	\visible<23-> {1000} \\
	\visible<24-> {1001} \\
	\visible<25-> {1010} \\
	\visible<26-> {1011} \\
	\visible<27-> {1100} \\
	\visible<28-> {1101} \\
	\visible<29-> {1110} \\
	\visible<30-> {1111} \\
	\visible<31-> {10000}
	\end{flushright}
\end{columns}}
\end{frame}


\begin{frame}[t]
\frametitle{Memoria de linea de retardo}
\begin{columns}[t]
	\column{0.5\textwidth}
	\begin{itemize}
		\item 1947
		\item John Adam Presper Eckert
		\item Lineas de retardo para Radar
		\item EDVAC, UNIVAC I
		\item Medio de propagación Mercurio
		\item 576 Bits
	\end{itemize}
	\column{0.5\textwidth}
	\begin{center}
		\includegraphics[width=4cm]{delay_line.png}
	\end{center}
\end{columns}
\end{frame}

\begin{frame}[t]
\frametitle{Compiladores}
	\begin{itemize}
	\item Principios de los 50s
	\item Programa generador automático de código de máquina
	\item Ejemplos
		\begin{itemize}
			\item Autocode (principios de 1950)
			\item FLOW-MATIC (1955)
			\item FORTRAN (mediados de 1950)
			\item COBOL (1959)
			\item ALGOL (1960)
		\end{itemize}
	\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Core memory}
	\begin{minipage}[c]{7.5cm}
		\begin{itemize}
			\item 1955-1975
			\item Toroides mágneticos
			\item Lectura destructiva
			\item Costo de 1.00(1955) a 0.01(1975) USD por bit
			\item Tecnologías desplazadas
				\begin{itemize}
					\item DRUM
					\item Tubos de Vacio
					\item Transistores
				\end{itemize}
			\item Fabricadas por sastres en el este asiático
		\end{itemize}
	\end{minipage}
	\begin{minipage}[c]{4cm}
		\includegraphics[width=4cm]{Ferrite_core_memory.eps} \\ \\
		\includegraphics[width=2.5cm]{Coincident-current_magnetic_core.eps}
	\end{minipage}
\end{frame}

\begin{frame}[t]
\frametitle{DRAM Memoria dinámica}
	\begin{itemize}
		\item 1966
		\item Robert Dennard
		\item Un transistor por bit
	\end{itemize}
	\begin{center}
		\includegraphics[width=6.5cm]{onetransistor.png} 
	\end{center}
\end{frame}

\begin{frame}
\frametitle{Banco de Memoria}
	\begin{center}
	\includegraphics[height=.8\textheight]{membank.eps}
	\end{center}
\end{frame}

\begin{frame}[t]
\frametitle{Multiplexado de la dirección}
	\begin{itemize}
		\item 1966-
		\item Robert Proebsting cofundador de Mostek
		\item Divide la direccion en dos y multiplexa las partes
			\begin{itemize}
				\item Filas \textbf{Row}
				\item Columnas \textbf{Column}
			\end{itemize}
		\item Reduce el tamaño del Chip y por consiguiente su costo.
		\item Fue ridiculizado por sus competidores.
		\item A finales de los 70s dominaba el 85\% del mercado mundial.
	\end{itemize}
	\begin{center}
		\includegraphics[width=0.55\textwidth]{MT4C1024-HD.jpg} \\
		\tiny{Micron MT4C1024 Chip. 1 Mbit DRAM. Die size 8662x3969$\mu m$ 1989 - 1991}
	\end{center}
\end{frame}

\begin{frame}
\frametitle{Diagrama en Bloques}
\framesubtitle{MOSTEK DRAM}
	\includegraphics[width=0.9\textwidth]{dramchip.eps}
\end{frame}

\begin{frame}[t]
\frametitle{Versiones más reconocidas}
\framesubtitle{DRAM}
	\begin{itemize}
	\item SDRAM Synchronous DRAM
		\begin{itemize}
			\item FPM Fast Page Mode
			\item EDO Extended Data Out - 1995
		\end{itemize}
	\item SDRAM Synchronous DRAM
		\begin{itemize}
		\item SDR Single Data Rate - 1993 
		\item DDR Double Data Rate - 2000
			\begin{itemize}
			\item DDR1 - 2000
			\item DDR2 - 2003
			\item DDR3 - 2007
			\item DDR4 - 2014
			\end{itemize}
		\end{itemize}
	\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Secuencia de acceso}
\framesubtitle{DRAM}
	\begin{itemize}
		\item Acceder a la fila con las lineas precargardas
		\item Conectar el amplificador de sensado y obtener el valor almacenado
		\item Acceder a la columna
		\item Recuperar el valor leido
		\item Percargar las lineas a la mitad de la tension entre el 0 y el 1 lógico
	\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Diagrama de tiempos FPM  y EDO}
	\begin{center}
		\includegraphics[width=\textwidth]{dram-timings.eps}
	\end{center}
\end{frame}

\begin{frame}
\frametitle{Diagrama de tiempos SDR DRAM}
	\begin{center}
		\includegraphics[width=\textwidth]{sdrdram-timings.eps}
	\end{center}
\end{frame}

\begin{frame}
\frametitle{Diagrama de tiempos DDR DRAM}
	\begin{center}
		\includegraphics[width=\textwidth]{ddrdram-timings.eps}
	\end{center}
\end{frame}

\section{Field Programmable Gate Arrays}
\begin{frame}
\frametitle{Ley de Moore}
	\begin{itemize}
		\item 1975
		\item Gordon E. Moore Co-fundador de Intel
		\item Duplicación de la escala de integración cada dos años.
	\end{itemize}
	\begin{center}
		\includegraphics[width=7cm]{mooreslaw.eps} 
	\end{center}
\end{frame}

\begin{frame}[t]
\frametitle{Lenguajes descriptores de hardware}
	\begin{columns}[t]
	\column{0.6\textwidth}
	\begin{itemize}
			\item Finales de los 60s
			\item Herramienta de especificación de hardware digital para:
				\begin{itemize}
				\item Simulación
				\item Sintetizadores de Hardware
				\item Compiladores de silicio
				\end{itemize}
			\item VHDL \\ VHSIC Hardware Description Language
			\item Primer HDL en normalizarse 1987
			\item Promovido por el DoD de EEUU
			\item Norma IEEE 1076
		\end{itemize}
	\column{0.4\textwidth}
		\lstinputlisting[language=VHDL,
			tabsize=2,
			basicstyle=\ttfamily\tiny,
			keywordstyle=\color{blue}\ttfamily,
			stringstyle=\color{red}\ttfamily,
			commentstyle=\color{brown}\ttfamily]{ffd.vhd}
	\end{columns}
\end{frame}

\begin{frame}
\frametitle{Gate Arrays o Arreglos de Compuertas}
	\begin{columns}[t]
	\column{0.6\textwidth}
		\begin{itemize}
		\item C.I. con bloques prearmandos para propósito específico
		\item Ventajas
			\begin{itemize}
			\item Fabricación de gran escala
			\item Solo requieren las máscaras de interconexión 
			\item Reduce el costo de la aplicación especifca
			\end{itemize}
		\end{itemize}
	\column{0.4\textwidth}
		\begin{center}
			\includegraphics[width=\textwidth]{S-MOS_Systems_ASIC_SLA6140.jpg} 
		\end{center}
	\end{columns}
%"S-MOS Systems ASIC SLA6140" by Antoinebercovici - Own work. Licensed under CC BY-SA 3.0 via Commons - https://commons.wikimedia.org/wiki/File:S-MOS_Systems_ASIC_SLA6140.jpg#/media/File:S-MOS_Systems_ASIC_SLA6140.jpg
\end{frame}

\begin{frame}[t]
\frametitle{FPGAs Field Programmable Gate Arrays}
	\begin{itemize}
		\item 1985
		\item Xilinx
		\item Gate Arrays cuya red interconexión es programable.
		\item Fabless
		\item Son los impulsores del incremento en la escala de integración
		\item Conciderada tecnología restrictiva
		\item Intel compra Altera principal competidor de Xilinx en el 2015.\\
			La acción de Altera paso a valer 50 USD (9/2015) de valer 30 USD 
		\item La idea se descartaba por la baja escala de integración del momento. \\
		Seis años después obtiene reingresos por 100 millones de USD.
	\end{itemize}
\end{frame}

\begin{frame}[t]
\frametitle{FPGAs Field Programmable Gate Arrays}
\framesubtitle{Restricciones de exportación}
	\begin{center}
		\includegraphics[width=\textwidth]{export.eps}
	\end{center}
\end{frame}

\begin{frame}
\frametitle{Ventajas}
	\begin{itemize}
		\item FPGA vs procesadores
		\begin{itemize}
			\item Más rápidas
			\item Menor consumo a igual aplicación
			\item Se adaptan a aplicaiones específicas
		\end{itemize}
		\item FPGA vs ASIC
		\begin{itemize}
			\item Menor costo de fabricacíon para bajo volunem
			\item Reprogramables para actualizaciones de la aplicación
		\end{itemize}
	\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Aplicaciones}
	\begin{minipage}[c]{5.5cm}
		\begin{itemize}
			\item Aeroespacio y Defensa
			\item Electro medicina.
			\item Protipado de ASIC.
			\item Audio
			\item Automotor
			\item Radio difusion
			\item Electronica de Consumo
			\item Data Center
		\end{itemize}
	\end{minipage}
	\begin{minipage}[c]{5.5cm}
		\begin{itemize}
			\item Computación de Alta Prestación
			\item Industrial
			\item Medicina
			\item Instrumentación Cientifica
			\item Seguridad
			\item Video \& Procesamiento de Imagen
			\item Communications alámbricas
			\item Comuniaciones inalabámbricas
		\end{itemize}
	\end{minipage}
\end{frame}

\begin{frame}[t]
\frametitle{Diagrama en bloque}
	\begin{center}
		\includegraphics[width=0.75\textwidth]{fpga.eps}
	\end{center}
\end{frame}

\begin{frame}[t]
\frametitle{Elemento Lógico}
	\begin{center}
		\includegraphics[width=0.75\textwidth]{fpgalut.eps}
	\end{center}
\end{frame}

\begin{frame}
\frametitle{Nu Horizons Spartan 3A DSP board}
	\begin{center}
		\includegraphics[width=11cm]{nuhorizonsS3DSP.jpg}
	\end{center}
\end{frame}

\begin{frame}
\frametitle{Descripción}
\framesubtitle{Nu Horizons Spartan 3A DSP board}
	\begin{itemize}
		\item 2008
		\item Spartan 3A DSP
			\begin{itemize}
				\item 37440 LE
				\item 84 BRAM de 18Kbits
				\item 84 Unidades de DSP
				\item 250 Mhz
				\item Tecnología de exportación restringida
			\end{itemize}
		\item 32 MBytes de Memoria DDR1 333 MT/s
		\item 2 ADC
			\begin{itemize}
				\item Diferencial
				\item 14 bits
				\item 120 MS/s
				\item 500 Mhz
			\end{itemize}
		\item Video DAC salida diferencial
		\item Ethernet
		\item Precio 200 USD
	\end{itemize}
\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo de aplicación : Convolución}
\framesubtitle{Algoritmo en Lenguaje C y en Assembler Optimizado}
	\begin{center}
		$y[n] = \sum\limits_{i=0}^{N=84-1}\ h[i]*x[n-i]$
	\end{center}
	\begin{columns}[t]
		\column{0.4\textwidth}
		\lstinputlisting[language=C,
			tabsize=4,
			basicstyle=\ttfamily\tiny,
			keywordstyle=\color{blue}\ttfamily,
			stringstyle=\color{red}\ttfamily,
			commentstyle=\color{brown}\ttfamily]{convolution.c}
		\column{0.6\textwidth}
		\lstinputlisting[language=C,
			tabsize=4,
			basicstyle=\ttfamily\tiny,
			keywordstyle=\color{blue}\ttfamily,
			stringstyle=\color{red}\ttfamily,
			commentstyle=\color{brown}\ttfamily]{convolution.s}
	\end{columns}
\end{frame}

\begin{frame}
\frametitle{Ejemplo de aplicación : Convolución}
\framesubtitle{Diagrama en bloque para FPGA}
	\begin{center}
		$y[n] = \sum\limits_{i=0}^{N=84-1}\ h[i]*x[n-i]$
	\end{center}
	\begin{center}
		\includegraphics[width=11cm]{convolutionfpga.eps}
	\end{center}
\end{frame}

\begin{frame}[t]
\frametitle{Ejemplo de aplicación : Convolución}
\framesubtitle{Comparación entre FPGA y Procesador}
	\begin{columns}[t]
	\column{0.4\textwidth}
		\begin{itemize}
			\item Tecnología 2004
			\item Spartan 3A DSP
			\item 90 nm
			\item 250 Mhz o ciclo de 4 ns
			\item Un resultado por ciclo
			\item Un resultado cada 4 ns
		\end{itemize}
	\column{0.6\textwidth}
		\begin{itemize}
			\item Tecnología 2008
			\item Intel i7 920
			\item 45 nm
			\item 2.66 Ghz  o ciclo de .375 ps
			\item Un resultado cada 84 ciclos del lazo
			\item Un lazo 7 instrucciones
			\item 2.5 instrucciones por ciclo promedio
			\item Un resultado cada 84*7/(2.5*2.66) = 88 ns
		\end{itemize}
	\end{columns}
	\begin{center}
		$\frac{Spartan3A\ DSP}{Corei7} = \frac{88 ns}{4 ns} = 22$ veces más rápida
	\end{center}
\end{frame}

\begin{frame}
\frametitle{Requerimiento de memoria masiva}
	\begin{itemize}
		\item La FPGA tiene memoria interna pero no es masiva
		\item La transferencia de datos debe ser rápida para poder sostener la tasa de procesamiento
		\item Se requiere memoria DRAM
	\end{itemize}
\end{frame}

\section{DDR3 DRAM}
\begin{frame}
\frametitle{Diagrama en bloque}
	\begin{center}
		\includegraphics[width=\textwidth]{ddr3-blockdiagraman.eps}
	\end{center}
\end{frame}

\begin{frame}
\frametitle{Diagrama en bloques controlador de DRAM FPGA}
	\begin{center}
		\includegraphics[width=.95\textwidth]{ddrcntroler.eps}
	\end{center}
\end{frame}

\begin{frame}[t]
\frametitle{Program Unit}
	\begin{columns}[t]
	\column{0.5\textwidth}
		\begin{itemize}
			\item Sirve el pedido de la aplicación
			\item Secuencia las instrucciones:
				\begin{itemize}
					\item ACT
					\item READ
					\item WRITE
					\item PRE
					\item REF
				\end{itemize}
		\end{itemize}
	\column{0.6\textwidth}
		\begin{center}
			\includegraphics[width=.75\textwidth]{ddr3-statedbusy.eps}
		\end{center}
	\end{columns}
\end{frame}

\begin{frame}
\frametitle{Processor Unit}
	\begin{itemize}
		\item Temporización de las instrucciones
			\begin{itemize}
				\item ACT
				\item READ
				\item WRITE
				\item PRE
				\item REF
			\end{itemize}
		\item Tiempos de propagación críticos 
	\end{itemize}
\end{frame}


\begin{frame}[t]
\frametitle{Config \& Refresh Unit}
	\begin{itemize}
	\item Ejecuta las intrucciones de inicialización
	\item Temporización de las instrucciones MPR, MRS
	\item Ciclo de refresco
	\item Configuración de BL, CL, AL, WL
	\end{itemize}
	\begin{center}
		\includegraphics[width=0.6\textwidth]{ddr3initstated.eps}
	\end{center}
\end{frame}


\begin{frame}[t]
\frametitle{Scheduler Unit}
	\begin{itemize}
		\item Temporización de las señales de acceso a :
			\begin{itemize}
				\item DRAM
				\item IOFIFOs
			\end{itemize}
		\item Tiempos de propagación críticos
		\item Phase Unit es un registro de desplazamiento con las phases necesarias para todos los eventos posibles
		\item Task Unit elige las salidas del registro de desplazamiento conforme a los diagramas de tiempos
	\end{itemize}
\end{frame}

\end{document}

